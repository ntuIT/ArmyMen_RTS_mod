///////////////////////////////////////////////////////////////////////////////
//
// Pandemic Studios
//

#include "fx_army_unit_boat.cfg"

// UNIT
CreateObjectType("army.unit.boat", "Unit")
{
  GameObj()
  {
    ThinkInterval(1);
    IdleTask("Tasks::UnitIdle");
    Properties()
    {
      Add("Filter::Army");
      Add("Filter::Weapon");
      Add("Filter::Mechanical");
      Add("Filter::Unit");
    }
  }
  MapObj()
  {
    GodFile("army_boat.god");
    NearFadeFactor(0.25);
    PhysicsModel("Hover");
    TractionType("traction_aquatic");

    ReticleType("Vehicle");

    ArmourClass("vehicle");
    HitPoints(650);

    TypeDisplay()
    {
      Image()
      {
        Image("if_boat_portrait.tga", 0, 0, 42, 42);
        Mode("Centre");
      }
    }
    GenericFX()
    {
      Add("Weapon::Fire", "weapon.aagun.fire");
      Add("MapObj::Health::Low", "damage.halftrack");
      Add("MapObj::Death", "unit.halftrack.death");
      Add("Restore::Target::Process", "restore-small");
      Add("MapObj::AddToMap2", "restore-small-puff");
      Add("UnitObj::Engine", "water.ripple");
    }
  }

  UnitObj()
  {
    TopSpeed(50);
    TurnSpeed(120);

    SeeingRange(65);

    ResponseEvents()
    {
      Add("Attack")
      {
        Add("army.unit.halftrack_attack-0.wav");
        Add("army.unit.halftrack_attack-1.wav");
      }
      Add("Attacked")
      {
        Add("army.unit.halftrack_attacked-0.wav");
        Add("army.unit.halftrack_attacked-1.wav");
      }
      Add("Move")
      {
        Add("army.unit.halftrack_move-0.wav");
        Add("army.unit.halftrack_move-1.wav");
        Add("army.unit.halftrack_move-2.wav");
      }
      Add("Select")
      {
        Add("army.unit.halftrack_select-0.wav");
        Add("army.unit.halftrack_select-1.wav");
        Add("army.unit.halftrack_select-2.wav");
      }
      Add("Spotted")
      {
        Add("army.unit.halftrack_spotted-0.wav");
      }
    }

    Constructor("army.building.garage1");
    ConstructionTime(40);
    CommandCost(1);
    ResourceCost()
    {
      Add("Plastic", 150);
      Add("Electricity", 150);
    }
    Prereqs()
    {
      Add("army.building.garage1");
    }

    Weapon("army.weapon.boat");
  }
}

// WEAPON
CreateWeaponType("army.weapon.boat")
{
  Style("Projectile");

  NodeStyle("Y_X");
  Nodes("cp-turret", "cp-barrel");

  MaxRange(64);

  HorizSeparation(180);

  Delay(2.0);
  TurnRate(360);
  Speed(400);
  Potshot(1);
  LeadAngle(1);
  AlignBase(0);

  Damage()
  {
    Amount(8);

    Effective("infantry", 100%);
    Effective("vehicle", 100%);
    Effective("structure", 100%);
    Effective("flyer", 100%);
    Effective("mine", 100%);
  }

  FirePoints()
  {
    Add("HP-FIRE1");
    Add("HP-FIRE2");
  }
  Projectile("army.proj.boat");
}

// PROJECTILE DEFINITION
CreateObjectType("army.proj.boat", "Projectile")
{
  MapObj()
  {
    GodFile("army_mortar_shell.god");
    GenericFX()
    {
      Add("ProjectileObj::Trail", "weapon.aagun.proj");
    }
  }

  ProjectileObj()
  {
    ProjectileModel("StraightTrajectory");
    Explosion("army.exp.boat");
  }
}

// EXPLOSION DEFINITION
CreateObjectType("army.exp.boat", "Explosion")
{
  MapObj()
  {
    Mesh();
    GenericFX()
    {
      Add("ExplosionObj::Explode", "weapon.aagun.exp");
    }
  }
  ExplosionObj()
  {
    Damage()
    {
      Amount(25);

      Effective("infantry", 75%);
      Effective("vehicle", 100%);
      Effective("structure", 100%);
      Effective("flyer", 100%);
      Effective("mine", 100%);
    }
    AreaInner(4);
    AreaOuter(8);
    Weapon("army.weapon.boat");
  }
}
