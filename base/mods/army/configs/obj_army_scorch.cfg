///////////////////////////////////////////////////////////////////////////////
//
// Pandemic Studios
//

#include "fx_army_unit_scorch.cfg"
#includeonce "fx_grunt_damage.cfg"

// UNIT
CreateObjectType("army.unit.scorch", "Unit")
{
  GameObj()
  {
    ThinkInterval(1);
    IdleTask("Tasks::UnitIdle");
    Properties()
    {
      Add("Filter::Army");
      Add("Filter::Biological");
      Add("Filter::Unit");
      Add("Filter::Weapon");
      Add("Filter::Heroes");
      Add("Filter::Transportable");
    }
  }

  MapObj()
  {
    GodFile("army_scorch.god");
    PhysicsModel("Walker");
    TractionType("ground");
    GrainSize(1);

    ArmourClass("infantry");
    HitPoints(600);

    GenericFX()
    {
      Add("UnitObj::ActivelyOnTeam", "flameidle");
      Add("Weapon::Fire", "weapon.flame.fire");
      Add("MapObj::AddToMap", "damage.grunt");
      Add("MapObj::Death", "death.infantry");
      Add("Restore::Target::Process", "restore-small");
      Add("MapObj::AddToMap2", "restore-small-puff");
      Add("Wounded::Start", "herowound");
      // Add("UnitObj::Engine", "water.ripple");
    }
    ShadowFile("army_grunt-shadow.tga");
    RotateShadow(0); // default is 1

  }

  UnitObj()
  {
    TopSpeed(40);
    TurnSpeed(1440);
    Wound(1);

    SeeingRange(65);

    ResponseEvents()
    {
      Add("Attack")
      {
        Add("army.unit.scorch_attack-0.wav");
        Add("army.unit.scorch_attack-1.wav");
      }
      Add("Attacked")
      {
        Add("army.unit.scorch_attacked-0.wav");
      }
      Add("Move")
      {
        Add("army.unit.scorch_move-0.wav");
        Add("army.unit.scorch_move-1.wav");
        Add("army.unit.scorch_move-2.wav");
      }
      Add("Select")
      {
        Add("army.unit.scorch_select-0.wav");
        Add("army.unit.scorch_select-1.wav");
        Add("army.unit.scorch_select-2.wav");
      }
      Add("Spotted")
      {
        Add("army.unit.scorch_spotted-0.wav");
      }
    }

    CommandCost(1);

    Weapon("army.weapon.scorch");
  }
}

// WEAPON
CreateWeaponType("army.weapon.scorch")
{
  Style("Projectile");
//  TargetStyle("MaxDefense");

  MaxRange(48);

  HorizAngle(90);
  HorizSeparation(5);
  VertAngle(90);
  VertSeparation(45);

  Delay(0.3);
  LeadAngle(1);
  Speed(200);
  AimAtBox(1);


  Damage()
  {
    Amount(15);

    Effective("infantry", 100%);
    Effective("vehicle", 50%);
    Effective("structure", 50%);
    Effective("flyer", 0%);
    Effective("mine", 50%);
  }

  FirePoints()
  {
    Add("HP-fire");
  }
  Projectile("army.proj.scorch");
}

// PROJECTILE DEFINITION
CreateObjectType("army.proj.scorch", "Projectile")
{
  MapObj()
  {
    Mesh();
    GenericFX()
    {
      Add("ProjectileObj::Hit", "flamewound");
    }
  }

  ProjectileObj()
  {
    TopSpeed(200);
    ProjectileModel("GuidedTrajectory");
    HomingRate(180);
    WaverTurn(0);
    WaverRate(0);
    Explosion("army.exp.scorch");
  }
}

// EXPLOSION DEFINITION
CreateObjectType("army.exp.scorch", "Explosion")
{
  MapObj()
  {
    Mesh();
    GenericFX()
    {
//      Add("ExplosionObj::Explode", "weapon.bazooka.exp");
    }
  }
  ExplosionObj()
  {
    Damage()
    {
      Amount(15);

      Effective("infantry", 100%);
      Effective("vehicle", 50%);
      Effective("structure", 50%);
      Effective("flyer", 0%);
      Effective("mine", 50%);
    }
    AreaInner(8);
    AreaOuter(8);
    Weapon("army.weapon.scorch");
  }
}
